<!DOCTYPE html>
<html lang="en">

<head>
  <title>Star Binder - Keybind Utility for Star Citizen</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
    content="Star Binder is a searchable/filterable keybind tool for Star Citizen that's far more powerful and easy to use than the in-game menu.  Exports into a format readable by the game and you can import your current keybinds into Star Binder to edit.">
  <meta name="keywords" content="Star Binder, Star Citizen, game, keybind, utility, tool">

  <!-- Preload Fonts -->
  <!-- <link rel="preload" href="./assets/fonts/Aileron-Regular.otf" as="font" type="font/otf" crossorigin>

  <link rel="preload" href="./assets/fonts/consola.ttf" as="font" type="font/ttf" crossorigin>

  <link rel="preload" href="./assets/fonts/Gobold Regular.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="./assets/fonts/Gobold Bold.ttf" as="font" type="font/ttf" crossorigin>

  <link rel="preload" href="./assets/fonts/Kiona-Regular.ttf" as="font" type="font/ttf" crossorigin> -->
  <!-- Preload Fonts -->
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>
  <script defer src="./script.js"></script>
  <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg">

</head>

<body>
  <div class="coffee">
    If this tool's helpful, you could always
    <a class="coffeeLink" href="https://buymeacoffee.com/zomgbies"> buy me a coffee</a>☕
  </div>


  <div class="content">
    <img class="headerImage" src="./assets/header.webp" width="60%">
    <h1 style="position:absolute; left:-9999px;">Star Binder</h1>
    <div id="tagContainer"></div>
    <div id="subTagContainer"></div>

    <div class="content-keybinds-border">
      <div class="content-keybinds-wrapper">
        <div class="searchbar-row">
          <div class="searchbar-container">
            <button class="searchbar-button" type="button"></button>
            <input type="text" id="keybindSearch" placeholder="Filter keybinds..." />
          </div>

          <div class="inputType-select">
            <button class="button button-inputSelect-keyboard" type="button">Mouse / Keyboard</button>
            <button class="button button-inputSelect-controller" type="button">Controller</button>
            <button class="button button-inputSelect-joystick" type="button">Joystick</button>
          </div>

          <div class="helpText">
            Double-click to rebind • Hold to clear •<br>CTRL-ALT-Click to set to default
          </div>

          <div class="joystick-dropdown-row" style=" grid-column: 1 / span 3; grid-row: 2;">
            <span class="joystick-dropdown-label">Joystick Model:</span>
            <div class="joystick-dropdown-button-wrapper">
              <button class="joystick-dropdown-button" type="button">
                <span class="button-text">Select Joystick Model</span> ▾
              </button>
              <div class="joystick-dropdown-menu" style="display: none;">
                <!-- Options will be dynamically added here -->
              </div>
            </div>
          </div>


        </div>

        <div class="content-keybinds-absolute-wrapper">
          <div class="content-keybinds"></div>
        </div>
      </div>



      <!-- Corners -->
      <img class="corner top-left" src="./assets/ContainerBorder/top-left.webp" alt="">
      <img class="corner top-right" src="./assets/ContainerBorder/top-left.webp" alt="">
      <img class="corner bottom-left" src="./assets/ContainerBorder/bottom-left.webp" alt="">
      <img class="corner bottom-right" src="./assets/ContainerBorder/bottom-left.webp" alt="">

      <!-- Top row -->
      <img class="side top-left" src="./assets/ContainerBorder/topAdjacent.webp" alt="">
      <div class="side top-middle"></div>
      <img class="side top-right" src="./assets/ContainerBorder/topAdjacent.webp" alt="">

      <!-- Bottom row -->
      <img class="side bottom-left" src="./assets/ContainerBorder/topAdjacent.webp" alt="">
      <div class="side bottom-middle"></div>
      <img class="side bottom-right" src="./assets/ContainerBorder/topAdjacent.webp" alt="">

      <!-- Left column -->
      <img class="side left-middle" src="./assets/ContainerBorder/leftMain.webp" alt="">
      <div class="side left-up"></div>
      <div class="side left-down"></div>

      <!-- Right column -->
      <img class="side right-middle" src="./assets/ContainerBorder/leftMain.webp" alt="">
      <div class="side right-up"></div>
      <div class="side right-down"></div>
    </div>



    <div class="footer">
      <div class="footer__left">
        <div class="footer__buttons">
          <div class="button-wrapper">
            <button class="button button--clear"></button>
            <span class="tooltip-text">Clear all current binds.</span>
          </div>
          <div class="button-wrapper">
            <button class="button button--import"></button>
            <span class="tooltip-text">Load an existing keybind configuration.</span>
          </div>
          <div class="button-wrapper">
            <button class="button button--export"></button>
            <span class="tooltip-text">Create XML ready for import to SC.</span>
          </div>
          <!--div class="button-wrapper">
            <button id="copyActionMapJSON" class="button button--debug">Copy JSON</button>
            <span class="tooltip-text">Copy all action names as JSON (debug only)</span>
          </div--->

        </div>



        <div class="footer__toggles">
          <div class="toggle-container">
            <label class="toggle-switch tri-state" id="boundActionsToggle">
              <span class="slider"></span>
            </label>
            <span class="toggle-label">All actions</span>
          </div>

          <div class="toggle-container">
            <label class="toggle-switch">
              <input type="checkbox" id="conflictsToggle">
              <span class="slider"></span>
            </label>
            <span class="toggle-label">Show conflicts</span>
          </div>
        </div>
      </div>

      <div class="footer__keybind-info">
        <div class="footer__keybind-text">[text]</div>
        <div class="footer__keybind-tags"></div>
      </div>
    </div>
    <button class="button info-toggle" type="button">Show Help</button>

  </div>

  <section class="info-section collapsed">
    <div class="info-content collapsed">
      <h2>About the Star Binder keybind tool:</h2>
      <p>
        This is an unofficial Star Citizen utility that makes keybinds <i>searchable</i>, <i>filterable</i>, and
        <i>customisable</i> in a way not possible before. Unlike the in-game UI, <b>Star Binder</b> lets you combine
        just about any key combination imaginable, plus you can choose between over fifteen activation modes instead of
        just "double tap".<br><br>

        Star Binder lets you export to an XML file which can then be ported directly into Star Citizen using the in-game
        menu.
        You can also import a Star Citizen-compatible keybind XML.
      </p>
      <hr>
      <h3>Star Binder Features</h3>
      <ul>
        <li><b>Search</b>: Use the search to filter matching actions based on keywords, the action name, and the
          categories it
          appears in. Clear the text and search again to show all keybinds again.</li><br>
        <li><b>Filter</b>: Click the filters above to filter by that category. Each action also has a set of tags
          in the description box in the footer; these can <i>also</i> be clicked on to filter. Additionally, you can
          use
          the
          filter
          toggles to show ONLY actions bound to the same key combination as another action, or ONLY actions that
          have a
          key/button
          assigned, or ONLY empty actions. </li><br>
        <li><b>Advanced bind info</b>: The footer will have further information about the keybind when available -
          such
          as a description of how it works or what it's for. This may not always be reliable as the game changes,
          but
          currently there's nothing of the sort in-game. Maybe one day this can be sourced from some kind of SC
          Wiki?
        </li><br>
        <li><b>Bind</b>: Double-click any action to record a new input. Hold a selected action with left-click to
          clear
          it.</li><br>
        <li><b>Custom Bind</b>: Construct a bespoke bind string as you see fit e.g.
          '<code>lctrl + g + h + j</code>'.
          This is recommended more for "advanced users". A quick reference guide replaces the keybind description at
          the
          bottom when you're entering a custom bind; this may prove useful.</li><br>
        <li><b>Activation Modes</b>: Choose from a range of modes, not just double tap - if in doubt, stick with the
          default. A short description of how they work appears when you hover on the chosen mode's icon.</li><br>
        <li><b>Clear</b>: This will clear the keybinds for the selected input only (i.e. if you're viewing
          joystick keybinds, the controller and keyboard binds will stay).</li><br>
        <li><b>Import</b>: Any XML that SC or Star Binder has generated can be imported into this utility
          and edited for later export. In theory, any keybind XML that SC can read/import, this can too.</li><br>
        <li><b>Export</b>: Convert your keybinds into a Star Citizen-compatible XML file. Be sure to move this to
          the
          correct folder and see the guide on importing keybinds if needed.<br>
          (default:
          <code>C:\Program Files\Roberts Space Industries\StarCitizen\LIVE\user\client\0\controls\mappings</code>)
        </li>
        <br>
      </ul>

      <hr>

      <p><strong>How do I import these keybinds into Star Citizen?</strong><br>
        When you're ready, click '<b>export</b>'. This will download an SC-compatible XML file to your browser's
        downloads folder.
        Simply move that file to your SC mappings folder (default:
        <code>C:\Program Files\Roberts Space Industries\StarCitizen\LIVE\user\client\0\controls\mappings</code>).
        Then
        all you need to do is use the in-game options to import the keybinds.
      </p>
      <p><strong>How do I import keybinds using the in-game menu?</strong><br>
        CIG have published a guide on this <a
          href="https://support.robertsspaceindustries.com/hc/en-us/articles/360000183328-Create-export-and-import-custom-profiles">here</a>.
        There is also a console command: <code>pp_RebindKeys [filename]</code>.
      </p>
      <p><strong>Will my existing keybinds be overwritten?</strong><br>
        The game's import system is additive, meaning that only what you're modifying is changed.<br>
        For example, if you only bind MFD actions using Star Binder, all other keybinds will be unaffected.<br>

        It is always recommended to back up your binds using the in-game menu first, so if something does go
        wrong you can revert (reset all to default <i>then</i> re-import your backup).
      </p>
      <p><strong>Windows has swapped which joystick is registered as primary/secondary, what can I do?</strong><br>
        <a
          href="https://support.robertsspaceindustries.com/hc/en-us/articles/360000183328-Create-export-and-import-custom-profiles#h_99136285991520890245046">As
          CIG explains</a>, you can use the console command <code>pp_resortdevices joystick 1 2</code> to swap
        sticks 1
        &
        2 around.<br>
        Additionally, in Star Binder, if you want to bind directly to a specific device, edit the prefix in the
        manual
        bind string.<br>
        e.g. <code>2:lctrl+button1</code> will bind to the 2nd device. <code>99:lctrl+button1</code> will bind it to
        the 99th device.
      </p>

      <hr>

      <h3>Known Issues and limitations</h3>
      <ul>
        <li><b>Your browser choice matters</b> -- Mouse4 and Mouse5 input cannot be captured/recorded if you are using
          Firefox. This sucks and I did my best to find a workaround. There is a stagnant bug report with Mozilla from
          a
          few years ago about it and that's it. Therefore, Chrome and/or Edge are technically recommended for best
          compatibility.</li><br>

        <li>Recording some inputs will inevitably also perform actions in your browser. Such as Mouse4 and Mouse5
          (navigate foreward/back). Where possible this has been prevented, but some can still happen. If necessary,
          use
          the manual input.</li><br>

        <li>It is possible that general settings may override the activation mode (e.g. the 'smart toggle' option for
          decoupled mode is there and not in the keybinds menu).</li><br>

        <li>Certain activation modes may be incompatible with some actions. Use 'default' if unsure.</li><br>
        <li>The 'custom bind' input field allows users to make literally any bind string without guard rails other
          than
          a generous character limit. You could set "Eject" to "The Cake is a lie 🍰" and it won't stop or correct you
          -
          user beware.</li><br>
        <li>As of now, it is not known if there are any missing bindable actions. If/when a feedback system is setup
          perhaps this can be verified by users over time.</li><br>
        <li><b>Filtering by category</b> may not show all binds for that category. Star Binder uses a mix of
          auto-parsing CIG's spaghetti keybind data, and manual/bespoke cataloguing. Almost entirely the former as of
          now.</li><br>
        <li>You may find you can record bindings, and even see them in the keybind UI in-game - but that isn't a
          guarantee they will work. e.g. I couldn't get 'F23' or 'contextmenu' to work.</li><br>

        <li>Using irregular key combos (e.g. Eject = "A+B+C") might only work if the 'Activation Mode' is a 'hold'
          type
          - TBC/needs testing.</li><br>

        <li><b>Controller Support:</b> PlayStation controllers <i>should</i> work but will show the XBOX buttons
          (A/B/X/Y); XBOX gamepads (and derivatives like Logitech ones) should work normally.</li><br>

        <li><b>Joystick Support:</b> I currently only have access to the Thrustmaster T.16000M for testing. Therefore
          other models may be unable to record certain binds. This can be overcome by recording the input in SC,
          exporting it, and reading how it's phrased in the XML file (e.g. trigger is 'button1') -- then you can use
          that same term in the custom keybind field.</li>
        <br>
      </ul>
    </div>
  </section>

  <!--script>
      // Copy JSON button handler
      document.getElementById("copyActionMapJSON").addEventListener("click", () =>
      {
        if (!actionMapsMasterList || !Array.isArray(actionMapsMasterList))
        {
          console.error("actionMapsMasterList is not defined or not an array");
          return;
        }

        const actionsStringArray = [];
        actionMapsMasterList.forEach(a =>
        {
          if (a.actionName) actionsStringArray.push(a.actionName);
        });

        const actionMapJSON = {};
        actionsStringArray.forEach(actionName =>
        {
          if (actionName && !actionMapJSON[actionName])
          {
            actionMapJSON[actionName] = { label: "", description: "", keywords: [] };
          }
        });

        const jsonString = JSON.stringify(actionMapJSON, null, 2);
        navigator.clipboard.writeText(jsonString)
          .then(() => alert("Action Map JSON copied to clipboard!"))
          .catch(err => console.error("Failed to copy:", err));
      });
    </script-->
  <a href="./feedback/form.html" class="feedback-link">[ SEND FEEDBACK / REPORT ISSUE ]</a>
</body>

</html>